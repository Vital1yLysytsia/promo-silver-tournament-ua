"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}!function(){var n="https://fav-prom.com/api_your_promo",o=new Date(Date.UTC(2025,11,1)),i=7,c=3,e=new URLSearchParams(window.location.search),t="reg",a=document.querySelector(".silverTour"),s=document.querySelector("#table"),u=document.querySelector("#tableOther"),r=document.querySelectorAll(".unauth-msg"),l=document.querySelectorAll(".took-part"),d=document.querySelectorAll(".btn-join"),f=document.querySelector(".spinner-overlay"),p=document.querySelectorAll(".table__tabs-item"),h=document.querySelector("#ukLeng"),y=document.querySelector("#enLeng")?"en":h?"uk":"uk",m=["place1","place2","place3"],v=0,g={},b=null;function _(e){return e?e.getDate().toString().padStart(2,"0")+"."+(e.getMonth()+1).toString().padStart(2,"0"):""}var w=function(e,t){return fetch(n+e,_objectSpread({headers:{Accept:"application/json","Content-Type":"application/json"}},t||{})).then(function(e){return e.json()}).catch(function(e){console.error("API request failed:",e);var t=e;return t={origin:window.location.href,userid:b,errorText:(null==t?void 0:t.error)||(null==t?void 0:t.text)||(null==t?void 0:t.message)||"Unknown error",type:(null==t?void 0:t.name)||"UnknownError",stack:(null==t?void 0:t.stack)||""},fetch("https://fav-prom.com/api-cms/reports/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(console.warn),Promise.reject(e)})};function S(){var e=document.querySelectorAll("[data-translate]");e&&e.length&&e.forEach(function(e){var t=e.getAttribute("data-translate");e.innerHTML=L(t),e.removeAttribute("data-translate")}),"en"===y&&a&&a.classList.add("en")}function L(e){return e?g[e]||"*----NEED TO BE TRANSLATED----*   key:  "+e:""}function E(){for(var e,t=new Date(o),n=new Date,r=[];t<=n;)e=new Date(t),(t=new Date(t.getTime())).setDate(t.getDate()+i),r.push({start:e,end:t,tag:0===r.length?null:1===r.length?"prev":"pre_prev"});return r.slice(-c)}function O(){var r=E();p.forEach(function(t,n){t.addEventListener("click",function(){var e;n!==v&&(p.forEach(function(e){return e.classList.remove("active")}),t.classList.add("active"),v=n,T(0==(e=(e=r.length)-1-n)?null:1==e?"prev":"pre_prev"))})})}function P(){b?(r.forEach(function(e){return e.classList.add("hide")}),w("/favuser/".concat(b,"?nocache=1")).then(function(e){e._id||e.userid?(d.forEach(function(e){return e.classList.add("hide")}),l.forEach(function(e){return e.classList.remove("hide")})):(d.forEach(function(e){return e.classList.remove("hide")}),l.forEach(function(e){return e.classList.add("hide")}))})):(d.forEach(function(e){return e.classList.add("hide")}),l.forEach(function(e){return e.classList.add("hide")}),r.forEach(function(e){return e.classList.remove("hide")}),Promise.resolve())}function j(e){var t;b&&(t={userid:b},e&&(t.fast=!0),w("/user",{method:"POST",body:JSON.stringify(t)}).then(function(e){d.forEach(function(e){return e.classList.add("hide")}),l.forEach(function(e){return e.classList.remove("hide")}),k()}))}function T(e){e=(e=e)?"/users/".concat(e):"/users",w(e).then(function(e){var t,n,r=e,o=b;s&&(s.innerHTML="",u&&(u.innerHTML=""),r)&&r.length&&(e=o&&r.find(function(e){return e.userid===o}),t=e?r.indexOf(e):-1,n=0<=t&&t<10,r.slice(0,10).forEach(function(e,t){var n=e.userid===o;D(e,t+1,r,n,s)}),u)&&e&&!n&&(r[(n=t)-1]&&D(r[n-1],n,r,!1,u,!0),D(e,n+1,r,!0,u),r[n+1])&&D(r[n+1],n+2,r,!1,u,!0),S()})}function D(e,t,n,r,o,i){var i=5<arguments.length&&void 0!==i&&i,c=document.createElement("div"),a=(c.classList.add("table__row"),m[t-1]),a=(a&&c.classList.add(a),r&&!i&&c.classList.add("you"),i&&c.classList.add("_neighbor"),""),a=1===t?'<img class="place-icon" src="img/trophy-first.png" alt=""><span>'.concat(t,"</span>"):2===t?'<img class="place-icon" src="img/trophy-second.png" alt=""><span>'.concat(t,"</span>"):3===t?'<img class="place-icon" src="img/trophy-third.png" alt=""><span>'.concat(t,"</span>"):r&&!i?'<span class="you-badge" data-translate="youBadge">ТИ</span><span>'.concat(t,"</span>"):t,s=(s=t)<=3?"prize_".concat(s):s<=10?"prize_4-10":s<=25?"prize_11-25":s<=50?"prize_26-50":s<=100?"prize_51-100":null,t=s?L(s):(s=t)<=3?{1:"15 000 ₴",2:"12 000 ₴",3:"10 000 ₴"}[s]:s<=5?"7 000 ₴":s<=10?"25 000 ₴":"850 ₴",r=r&&!i?e.userid:(s=e.userid)?"**"+s.toString().slice(2):"********";c.innerHTML='\n            <div class="table__row-item">'.concat(a,'</div>\n            <div class="table__row-item">').concat(r,'</div>\n            <div class="table__row-item">').concat((Math.round(100*e.points)/100).toFixed(2),'</div>\n            <div class="table__row-item">').concat(t,"</div>\n        "),o.appendChild(c)}function k(){O(),T()}function q(){b&&e.has(t)?j(!0):k()}w("/translates/".concat(y)).then(function(e){g=e,S()}).then(function(){var n,e,t,r;(n=E())&&0!==n.length&&(p.forEach(function(e,t){t=n[t];t?(e.innerHTML=_(t.start)+"-"+_(t.end),e.classList.remove("hide")):e.classList.add("hide")}),v=n.length-1,p.forEach(function(e,t){e.classList.toggle("active",t===v)})),window.store?(e=window.store.getState(),b=e.auth.isAuthorized&&e.auth.id||"",q()):(q(),t=0,r=setInterval(function(){t<50?window.g_user_id&&(b=window.g_user_id,q(),P(),clearInterval(r)):clearInterval(r),t++},200)),P(),d.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),j()})}),f&&f.classList.add("hide"),document.body.style.overflow="auto",a&&a.classList.remove("loading")})}();